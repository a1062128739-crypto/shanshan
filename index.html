<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>珊珊的《像风一样》</title>

<style>
body {
    margin: 0;
    background: #f0f4ff;
    font-family: "微软雅黑";
    text-align: center;
    padding-bottom: 120px;
}

#photo {
    width: 250px;
    height: 330px;
    border-radius: 14px;
    margin-top: 20px;
    object-fit: cover;
    box-shadow: 0 6px 18px rgba(0,0,0,0.2);
}

#title {
    font-size: 24px;
    margin-top: 15px;
    font-weight: bold;
}

#player-box {
    width: 85%;
    margin: 20px auto;
    text-align: center;
}

#progress {
    width: 90%;
}

#lyrics {
    width: 90%;
    margin: 20px auto;
    text-align: left;
    background: rgba(255,255,255,0.6);
    padding: 15px;
    border-radius: 12px;
    height: 200px;
    overflow-y: auto;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.highlight {
    color: #ff4b91;
    font-weight: bold;
}
</style>
</head>
<body>

<img id="photo" src="shanshan.jpg">

<div id="title">薛之谦《像风一样》送给珊珊 ❤️</div>

<div id="player-box">
    <audio id="audio" src="xiangfengyiyang.png"></audio>

    <button onclick="togglePlay()">播放 / 暂停</button>
    <br><br>

    <input type="range" id="progress" value="0" min="0" max="100">
</div>

<div id="lyrics">歌词加载中...</div>

<script>
// 播放暂停控制
let audio = document.getElementById("audio");
let progress = document.getElementById("progress");
let lyricsBox = document.getElementById("lyrics");
let lrcData = [];

function togglePlay() {
    if (audio.paused) audio.play();
    else audio.pause();
}

// 进度条更新
audio.addEventListener("timeupdate", () => {
    progress.value = (audio.currentTime / audio.duration) * 100;
    updateLyrics(audio.currentTime);
});

// 拖动进度条
progress.addEventListener("input", () => {
    audio.currentTime = audio.duration * (progress.value / 100);
});

// 加载 LRC 歌词
fetch("xiangfeng.lrc")
    .then(res => res.text())
    .then(text => {
        lyricsBox.innerHTML = "";
        let lines = text.split("\n");
        lines.forEach(line => {
            let match = line.match(/\[(\d+):(\d+\.\d+)\](.*)/);
            if (match) {
                let time = parseInt(match[1]) * 60 + parseFloat(match[2]);
                let content = match[3];
                lrcData.push({ time, content });
            }
        });
        lrcData.forEach(item => {
            let p = document.createElement("p");
            p.textContent = item.content;
            lyricsBox.appendChild(p);
        });
    });

// 高亮歌词
function updateLyrics(t) {
    let ps = lyricsBox.getElementsByTagName("p");
    for (let i = 0; i < lrcData.length; i++) {
        if (t >= lrcData[i].time && (!lrcData[i+1] || t < lrcData[i+1].time)) {
            for (let j = 0; j < ps.length; j++) ps[j].classList.remove("highlight");
            ps[i].classList.add("highlight");
            ps[i].scrollIntoView({ behavior: "smooth", block: "center" });
            break;
        }
    }
}
</script>

</body>
</html>
